
<!DOCTYPE HTML>
<html lang="us-en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Code Overview · Ingress Nginx 英文文档</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-solarizedlight.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="getting-started.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://docs.khs1994.com" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Deploy
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../deploy/baremetal.html">
            
                <a href="../deploy/baremetal.html">
            
                    
                    Baremetal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../deploy/hardening-guide.html">
            
                <a href="../deploy/hardening-guide.html">
            
                    
                    Hardening Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../deploy/">
            
                <a href="../deploy/">
            
                    
                    Index
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../deploy/rbac.html">
            
                <a href="../deploy/rbac.html">
            
                    
                    Rbac
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../deploy/upgrade.html">
            
                <a href="../deploy/upgrade.html">
            
                    
                    Upgrade
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Developer Guide
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1" data-path="code-overview.html">
            
                <a href="code-overview.html">
            
                    
                    Code Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../enhancements/">
            
                <a href="../enhancements/">
            
                    
                    Enhancements
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../enhancements/20190724-only-dynamic-ssl.html">
            
                <a href="../enhancements/20190724-only-dynamic-ssl.html">
            
                    
                    Remove Static SSL Configuration Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../enhancements/20190815-zone-aware-routing.html">
            
                <a href="../enhancements/20190815-zone-aware-routing.html">
            
                    
                    Availability Zone Aware Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../enhancements/YYYYMMDD-kep-template.html">
            
                <a href="../enhancements/YYYYMMDD-kep-template.html">
            
                    
                    KEP Template
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Examples
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" >
            
                <span>
            
                    
                    Affinity
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../examples/affinity/cookie/">
            
                <a href="../examples/affinity/cookie/">
            
                    
                    Cookie
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <span>
            
                    
                    Auth
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../examples/auth/basic/">
            
                <a href="../examples/auth/basic/">
            
                    
                    Basic
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../examples/auth/client-certs/">
            
                <a href="../examples/auth/client-certs/">
            
                    
                    Client Certs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../examples/auth/external-auth/">
            
                <a href="../examples/auth/external-auth/">
            
                    
                    External Auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.4" data-path="../examples/auth/oauth-external-auth/">
            
                <a href="../examples/auth/oauth-external-auth/">
            
                    
                    Oauth External Auth
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" >
            
                <span>
            
                    
                    Customization
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../examples/customization/configuration-snippets/">
            
                <a href="../examples/customization/configuration-snippets/">
            
                    
                    Configuration Snippets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2" data-path="../examples/customization/custom-configuration/">
            
                <a href="../examples/customization/custom-configuration/">
            
                    
                    Custom Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3" data-path="../examples/customization/custom-errors/">
            
                <a href="../examples/customization/custom-errors/">
            
                    
                    Custom Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.4" data-path="../examples/customization/custom-headers/">
            
                <a href="../examples/customization/custom-headers/">
            
                    
                    Custom Headers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.5" data-path="../examples/customization/external-auth-headers/">
            
                <a href="../examples/customization/external-auth-headers/">
            
                    
                    External Auth Headers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.6" data-path="../examples/customization/ssl-dh-param/">
            
                <a href="../examples/customization/ssl-dh-param/">
            
                    
                    Ssl Dh Param
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.7" data-path="../examples/customization/sysctl/">
            
                <a href="../examples/customization/sysctl/">
            
                    
                    Sysctl
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../examples/docker-registry/">
            
                <a href="../examples/docker-registry/">
            
                    
                    Docker Registry
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../examples/grpc/">
            
                <a href="../examples/grpc/">
            
                    
                    Grpc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../examples/multi-tls/">
            
                <a href="../examples/multi-tls/">
            
                    
                    Multi Tls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../examples/psp/">
            
                <a href="../examples/psp/">
            
                    
                    Psp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../examples/rewrite/">
            
                <a href="../examples/rewrite/">
            
                    
                    Rewrite
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../examples/static-ip/">
            
                <a href="../examples/static-ip/">
            
                    
                    Static Ip
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="../examples/tls-termination/">
            
                <a href="../examples/tls-termination/">
            
                    
                    Tls Termination
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="../examples/">
            
                <a href="../examples/">
            
                    
                    Index
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.12" data-path="../examples/PREREQUISITES.html">
            
                <a href="../examples/PREREQUISITES.html">
            
                    
                    PREREQUISITES
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    User Guide
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" >
            
                <span>
            
                    
                    Nginx Configuration
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../user-guide/nginx-configuration/annotations.html">
            
                <a href="../user-guide/nginx-configuration/annotations.html">
            
                    
                    Annotations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../user-guide/nginx-configuration/configmap.html">
            
                <a href="../user-guide/nginx-configuration/configmap.html">
            
                    
                    Configmap
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.3" data-path="../user-guide/nginx-configuration/custom-template.html">
            
                <a href="../user-guide/nginx-configuration/custom-template.html">
            
                    
                    Custom Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.4" data-path="../user-guide/nginx-configuration/">
            
                <a href="../user-guide/nginx-configuration/">
            
                    
                    Index
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.5" data-path="../user-guide/nginx-configuration/log-format.html">
            
                <a href="../user-guide/nginx-configuration/log-format.html">
            
                    
                    Log Format
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" >
            
                <span>
            
                    
                    Third Party Addons
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../user-guide/third-party-addons/modsecurity.html">
            
                <a href="../user-guide/third-party-addons/modsecurity.html">
            
                    
                    Modsecurity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="../user-guide/third-party-addons/opentracing.html">
            
                <a href="../user-guide/third-party-addons/opentracing.html">
            
                    
                    Opentracing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../user-guide/basic-usage.html">
            
                <a href="../user-guide/basic-usage.html">
            
                    
                    Basic Usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../user-guide/cli-arguments.html">
            
                <a href="../user-guide/cli-arguments.html">
            
                    
                    Cli Arguments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../user-guide/custom-errors.html">
            
                <a href="../user-guide/custom-errors.html">
            
                    
                    Custom Errors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../user-guide/default-backend.html">
            
                <a href="../user-guide/default-backend.html">
            
                    
                    Default Backend
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../user-guide/exposing-tcp-udp-services.html">
            
                <a href="../user-guide/exposing-tcp-udp-services.html">
            
                    
                    Exposing Tcp Udp Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="../user-guide/external-articles.html">
            
                <a href="../user-guide/external-articles.html">
            
                    
                    External Articles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../user-guide/fcgi-services.html">
            
                <a href="../user-guide/fcgi-services.html">
            
                    
                    Fcgi Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../user-guide/ingress-path-matching.html">
            
                <a href="../user-guide/ingress-path-matching.html">
            
                    
                    Ingress Path Matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="../user-guide/miscellaneous.html">
            
                <a href="../user-guide/miscellaneous.html">
            
                    
                    Miscellaneous
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="../user-guide/monitoring.html">
            
                <a href="../user-guide/monitoring.html">
            
                    
                    Monitoring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="../user-guide/multiple-ingress.html">
            
                <a href="../user-guide/multiple-ingress.html">
            
                    
                    Multiple Ingress
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="../user-guide/tls.html">
            
                <a href="../user-guide/tls.html">
            
                    
                    Tls
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../e2e-tests.html">
            
                <a href="../e2e-tests.html">
            
                    
                    E 2 E Tests
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../how-it-works.html">
            
                <a href="../how-it-works.html">
            
                    
                    How It Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../kubectl-plugin.html">
            
                <a href="../kubectl-plugin.html">
            
                    
                    Kubectl Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../troubleshooting.html">
            
                <a href="../troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Code Overview</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ingress-nginx---code-overview">Ingress NGINX - Code Overview</h1>
<p>This document provides an overview of Ingress NGINX code.</p>
<h2 id="core-golang-code">Core Golang code</h2>
<p>This part of the code is responsible for the main logic of Ingress NGINX. It contains all the logics that parses <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank">Ingress Objects</a>, 
<a href="https://kubernetes.io/docs/reference/glossary/?fundamental=true#term-annotation" target="_blank">annotations</a>, watches Endpoints and turn them into usable nginx.conf configuration.</p>
<h3 id="core-sync-logics">Core Sync Logics:</h3>
<p>Ingress-nginx has an internal model of the ingresses, secrets and endpoints in a given cluster. It maintains two copy of that (1) currently running configuration model and (2) the one generated in response to some changes in the cluster. </p>
<p>The sync logic diffs the two models and if there&apos;s a change it tries to converge the running configuration to the new one. </p>
<p>There are static and dynamic configuration changes. </p>
<p>All endpoints and certificate changes are handled dynamically by posting the payload to an internal NGINX endpoint that is handled by Lua.</p>
<hr>
<p>The following parts of the code can be found:</p>
<h3 id="entrypoint">Entrypoint</h3>
<p>Is the <code>main</code> package, responsible for starting ingress-nginx program.</p>
<p>It can be found in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/cmd/nginx" target="_blank">cmd/nginx</a> directory.</p>
<h3 id="version">Version</h3>
<p>Is the package of the code responsible for adding <code>version</code> subcommand, and can be found in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/version" target="_blank">version</a> directory.</p>
<h3 id="internal-code">Internal code</h3>
<p>This part of the code contains the internal logics that compose Ingress NGINX Controller, and it&apos;s split in:</p>
<h4 id="admission-controller">Admission Controller</h4>
<p>Contains the code of <a href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/" target="_blank">Kubernetes Admission Controller</a> which validates the syntax of ingress objects before accepting it.</p>
<p>This code can be found in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/admission/controller" target="_blank">internal/admission/controller</a> directory.</p>
<h4 id="file-functions">File functions</h4>
<p>Contains auxiliary codes that deal with files, such as generating the SHA1 checksum of a file, or creating required directories.</p>
<p>This code can be found in <a href="https://github.com/kubernetes/ingress-nginx/blob/master/internal/file" target="_blank">internal/file</a> directory.</p>
<h4 id="ingress-functions">Ingress functions</h4>
<p>Contains all the logics from NGINX Ingress Controller, with some examples being:</p>
<ul>
<li>Expected Golang structures that will be used in templates and other parts of the codes - <a href="https://github.com/kubernetes/ingress-nginx/blob/master/internal/ingress/types.go" target="_blank">internal/ingress/types.go</a>.</li>
<li>supported annotations and its parsing logics - <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/ingress/annotations" target="_blank">internal/ingress/annotations</a>.</li>
<li>reconciliation loops and logics - <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/ingress/controller" target="_blank">internal/ingress/controller</a></li>
<li>Defaults - define the default struct.</li>
<li>Error interface and types implementation - <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/ingress/errors" target="_blank">internal/ingress/errors</a></li>
<li>Metrics collectors for Prometheus exporting - <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/ingress/metric" target="_blank">internal/ingress/metric</a>.</li>
<li>Resolver - Extracts information from a controller.</li>
<li>Ingress Object status publisher - <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/ingress/status" target="_blank">internal/ingress/status</a>.</li>
</ul>
<p>And other parts of the code that will be written in this document in a future.</p>
<h4 id="k8s-functions">K8s functions</h4>
<p>Contains helper functions for parsing Kubernetes objects.</p>
<p>This part of the code can be found in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/k8s" target="_blank">internal/k8s</a> directory.</p>
<h4 id="networking-functions">Networking functions</h4>
<p>Contains helper functions for networking, such as IPv4 and IPv6 parsing, SSL certificate parsing, etc.</p>
<p>This part of the code can be found in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/net" target="_blank">internal/net</a> directory.</p>
<h4 id="nginx-functions">NGINX functions</h4>
<p>Contains helper function to deal with NGINX, such as verify if it&apos;s running and reading it&apos;s configuration file parts.</p>
<p>This part of the code can be found in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/nginx" target="_blank">internal/nginx</a> directory.</p>
<h4 id="tasks--queue">Tasks / Queue</h4>
<p>Contains the functions responsible for the sync queue part of the controller.</p>
<p>This part of the code can be found in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/internal/task" target="_blank">internal/task</a> directory.</p>
<h4 id="other-parts-of-internal">Other parts of internal</h4>
<p>Other parts of internal code might not be covered here, like runtime and watch but they can be added in a future.</p>
<h2 id="e2e-test">E2E Test</h2>
<p>The e2e tests code is in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/test" target="_blank">test</a> directory.</p>
<h2 id="other-programs">Other programs</h2>
<p>Describe here <code>kubectl plugin</code>, <code>dbg</code>, <code>waitshutdown</code> and cover the hack scripts.</p>
<h2 id="deploy-files">Deploy files</h2>
<p>This directory contains the <code>yaml</code> deploy files used as examples or references in the docs to deploy Ingress NGINX and other componentes.</p>
<p>Those files are in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/deploy" target="_blank">deploy</a> directory.</p>
<h2 id="helm-chart">Helm Chart</h2>
<p>Used to generate the Helm chart published.</p>
<p>Code is in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/charts/ingress-nginx" target="_blank">charts/ingress-nginx</a>.</p>
<h2 id="documentationwebsite">Documentation/Website</h2>
<p>The documentation used to generate the website <a href="https://kubernetes.github.io/ingress-nginx/" target="_blank">https://kubernetes.github.io/ingress-nginx/</a></p>
<p>This code is available in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/docs" target="_blank">docs</a> and it&apos;s main &quot;language&quot; is <code>Markdown</code>, used by <a href="https://github.com/kubernetes/ingress-nginx/blob/master/mkdocs.yml" target="_blank">mkdocs</a> file to generate static pages.</p>
<h2 id="container-images">Container Images</h2>
<p>Container images used to run ingress-nginx, or to build the final image.</p>
<h3 id="base-images">Base Images</h3>
<p>Contains the <code>Dockerfiles</code> and scripts used to build base images that are used in other parts of the repo. They are present in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/images" target="_blank">images</a> repo. Some examples:</p>
<ul>
<li><a href="https://github.com/kubernetes/ingress-nginx/tree/master/images/nginx" target="_blank">nginx</a> - The base NGINX image ingress-nginx uses is not a vanilla NGINX. It bundles many libraries together and it is a job in itself to maintain that and keep things up-to-date.</li>
<li><a href="https://github.com/kubernetes/ingress-nginx/tree/master/images/custom-error-pages" target="_blank">custom-error-pages</a> - Used on the custom error page examples.</li>
</ul>
<p>There are other images inside this directory.</p>
<h3 id="ingress-controller-image">Ingress Controller Image</h3>
<p>The image used to build the final ingress controller, used in deploy scripts and Helm charts. </p>
<p>This is NGINX with some Lua enhancement. We do dynamic certificate, endpoints handling, canary traffic split, custom load balancing etc at this component. One can also add new functionalities using Lua plugin system.</p>
<p>The files are in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/rootfs" target="_blank">rootfs</a> directory and contains:</p>
<ul>
<li>The Dockerfile</li>
<li><a href="https://github.com/kubernetes/ingress-nginx/tree/master/rootfs/ingress-controller" target="_blank">Auxiliary scripts</a></li>
</ul>
<h4 id="ingress-nginx-lua-scripts">Ingress NGINX Lua Scripts</h4>
<p>Ingress NGINX uses Lua Scripts to enable features like hot reloading, rate limiting and monitoring. Some are written using the <a href="https://openresty.org/en/" target="_blank">OpenResty</a> helper.</p>
<p>The directory containing Lua scripts is <a href="https://github.com/kubernetes/ingress-nginx/tree/master/rootfs/etc/nginx/lua" target="_blank">rootfs/etc/nginx/lua</a>.</p>
<h4 id="nginx-go-template-file">Nginx Go template file</h4>
<p>One of the functions of Ingress NGINX is to turn <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank">Ingress</a> objects into nginx.conf file. </p>
<p>To do so, the final step is to apply those configurations in <a href="https://github.com/kubernetes/ingress-nginx/tree/master/rootfs/etc/nginx/template" target="_blank">nginx.tmpl</a> turning it into a final nginx.conf file.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="getting-started.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Getting Started">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Code Overview","level":"1.3.1","depth":2,"next":{"title":"Getting Started","level":"1.3.2","depth":2,"path":"developer-guide/getting-started.md","ref":"developer-guide/getting-started.md","articles":[]},"previous":{"title":"Developer Guide","level":"1.3","depth":1,"ref":"","articles":[{"title":"Code Overview","level":"1.3.1","depth":2,"path":"developer-guide/code-overview.md","ref":"developer-guide/code-overview.md","articles":[]},{"title":"Getting Started","level":"1.3.2","depth":2,"path":"developer-guide/getting-started.md","ref":"developer-guide/getting-started.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-sharing","-highlight","-livereload","prism"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-solarizedlight.css"]},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Ingress Nginx 英文文档","language":"us-en","links":{"sidebar":{"Home":"https://docs.khs1994.com"}},"gitbook":"*"},"file":{"path":"developer-guide/code-overview.md","mtime":"2021-07-15T00:57:35.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-07-15T00:58:07.939Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

